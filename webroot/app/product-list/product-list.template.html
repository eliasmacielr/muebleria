<md-toolbar class="md-table-toolbar">
  <div class="md-toolbar-tools">
    <h2>Listado de productos</h2>
  </div>
</md-toolbar>

<md-card>
  <!-- Show this toolbar when no items are selected -->
  <md-toolbar class="md-table-toolbar md-default" layout="row" ng-show="$ctrl.selected.length == 0">
    <div class="md-toolbar-tools">
      <h2><span>Productos</span></h2>
      <span flex></span>
      <!-- Search -->
      <md-button class="md-icon-button" aria-label="Buscar" ng-click="$ctrl.showSearch = !$ctrl.showSearch">
        <md-icon md-svg-icon="img/icons/ic_search_black_24px.svg"></md-icon>
      </md-button>
      <form class"ng-pristine ng-valid flex">
        <input type="text" ng-model="$ctrl.search.str" class="ng-pristine ng-valid ng-touched" aria-invalid="false" ng-show="$ctrl.showSearch">
      </form>
      <!-- Add -->
      <md-button class="md-icon-button" aria-label="Crear" ng-click="saveProductDialog($event)">
        <md-icon md-svg-icon="img/icons/ic_add_black_24px.svg"></md-icon>
      </md-button>
    </div>
  </md-toolbar>

  <!-- Show this toolbar when one or more items are selected -->
  <md-toolbar class="md-table-toolbar md-default" layout="row" ng-show="$ctrl.selected.length != 0">
    <div class="md-toolbar-tools">
      <h2><span>Productos</span></h2>
      <span flex></span>
      <!-- Delete -->
      <md-button class="md-icon-button" aria-label="Eliminar">
        <md-icon md-svg-icon="img/icons/ic_delete_black_24px.svg"></md-icon>
      </md-button>
    </div>
  </md-toolbar>

  <!-- The actual table -->
  <md-table-container>
    <table md-table md-row-select="true" multiple="true" ng-model="$ctrl.selected" md-progress="promise">
      <thead md-head md-order="$ctrl.query.order" md-on-reorder="$ctrl.getProducts">
        <tr md-row>
          <th md-column md-order-by="name"><span>Nombre</span></th>
          <th md-column md-numeric md-order-by="price"><span>Precio</span></th>
          <th md-column md-numeric md-order-by="stock"><span>Stock</span></th>
          <th md-column md-numeric md-order-by="discount"><span>Descuento (%)</span></th>
        </tr>
      </thead>
      <tbody md-body>
        <tr md-row md-select="product" md-select-id="id" md-auto-select="true"
        ng-repeat="product in $ctrl.products.products
          | orderBy: $ctrl.query.order
          | limitTo: $ctrl.query.limit : ($ctrl.query.page -1) * $ctrl.query.limit">
          <!-- add button to view details of the product -->
          <td md-cell>{{product.name}}</td>
          <td md-cell>{{product.price}}</td>
          <td md-cell>{{product.stock}}</td>
          <td md-cell>{{product.discount}}</td>
        </tr>
      </tbody>
    </table>
  </md-table-container>

  <!-- Footer for the table with pagination options  -->
  <md-table-pagination md-limit="$ctrl.query.limit" md-limit-options="$ctrl.limitOptions" md-page="$ctrl.query.page" md-total="{{$ctrl.products.pagination.count}}" md-on-paginate="$ctrl.getProducts" md-page-select></md-table-pagination>
</md-card>
